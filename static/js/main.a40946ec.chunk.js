(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{29:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),r=a.n(n),o=a(5),s=a.n(o),i=a(4),u=(a(29),a(6));function l(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1];return Object(c.jsx)("header",{className:"Searchbar",onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o.toLowerCase()),s("")):u.b.error("\u041f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435 \u043f\u043e\u0438\u0441\u043a\u0430.",{toastId:"searchbar"})},children:Object(c.jsxs)("form",{className:"SearchForm",children:[Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value)}}),Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})})]})})}var j=a(11),b=(a(12),a(21)),d=a.n(b),m=a(22),f=a.n(m),O="19294514-cad9d9492229c8304ad27e22b",h=10;var g={fetchImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat(O,"&image_type=photo&orientation=horizontal&per_page=").concat(h)).then((function(e){return 200===e.status?e.data:Promise.reject(new Error("Images are not found."))}))}};function p(e){var t=e.src,a=e.alt,n=e.source;return Object(c.jsx)("li",{className:"ImageGalleryItem",children:Object(c.jsx)("img",{className:"ImageGalleryItem-image",src:t,alt:a,"data-source":n})})}function v(e){var t=e.onClick;return Object(c.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}a(58);var x=a(23),S=a.n(x);function y(){return Object(c.jsx)(S.a,{type:"Puff",color:"#00BFFF",height:100,width:100})}var w="idle",I="pending",k="resolved",N="rejected";function C(e){var t=e.searchQuery,a=e.toggleModal,r=Object(n.useState)([]),o=Object(i.a)(r,2),s=o[0],l=o[1],b=Object(n.useState)(0),m=Object(i.a)(b,2),f=m[0],O=m[1],h=Object(n.useState)(null),x=Object(i.a)(h,2),S=x[0],C=x[1],E=Object(n.useState)(w),F=Object(i.a)(E,2),L=F[0],M=F[1],T=Object(n.useState)(1),A=Object(i.a)(T,2),B=A[0],G=A[1];Object(n.useEffect)((function(){t&&(G(1),M(I),H(t))}),[t]),Object(n.useEffect)((function(){1!==B&&(M(I),H(t,B))}),[B]);var H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g.fetchImage(e,t).then((function(e){var a=e.hits,c=e.totalHits;l(t>1?function(e){return[].concat(Object(j.a)(e),Object(j.a)(a))}:a),O(c),M(k),J()})).catch((function(e){C(e),M(N)})).finally((function(){M(w)}))},J=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return L===I?Object(c.jsx)(y,{}):(L===N&&function(e){u.b.error(e.message,{toastId:"error"})}(S),L===k||L===w?s.length||L===w?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{className:"ImageGallery",onClick:function(e){e.target!==e.currentTarget&&a({isOpen:!0,src:e.target.dataset.source,alt:e.target.alt})},children:s.map((function(e){var t=e.tags,a=e.webformatURL,n=e.largeImageURL;return Object(c.jsx)(p,{src:a,alt:t,source:n},d.a.generate())}))}),s.length<f&&Object(c.jsx)(v,{onClick:function(){G((function(e){return e+1}))}})]}):(u.b.info("Images are not found.",{toastId:"resolved"}),null):null)}function E(e){var t=e.toggleModal,a=e.modalImg,r=e.modalAlt;Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}),[]);var o=function(e){"Escape"===e.code&&s()},s=function(){t({isOpen:!1,src:"",alt:""})};return Object(c.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&s()},children:Object(c.jsx)("div",{className:"Modal",children:Object(c.jsx)("img",{src:a,alt:r})})})}function F(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),j=s[0],b=s[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),f=m[0],O=m[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),p=g[0],v=g[1],x=function(e){var t=e.isOpen,a=e.src,c=e.alt;b(t),O(a),v(c)};return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(u.a,{closeOnClick:!0,autoClose:2e3}),Object(c.jsx)(l,{onSubmit:function(e){r(e)}}),Object(c.jsx)(C,{searchQuery:a,toggleModal:x}),j&&Object(c.jsx)(E,{toggleModal:x,modalImg:f,modalAlt:p})]})}a(78),a(79),a(80);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.a40946ec.chunk.js.map